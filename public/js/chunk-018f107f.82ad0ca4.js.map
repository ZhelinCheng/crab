{"version":3,"sources":["webpack:///./src/views/user/login.vue?8e17","webpack:///src/views/user/login.vue","webpack:///./src/views/user/login.vue?cc64","webpack:///./src/views/user/login.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/user/login.vue?1c0b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","validator","rulesName","trigger","model","value","callback","$$v","$set","expression","slot","rulesPassword","on","submitForm","_v","_s","isLogin","staticRenderFns","name","data","password","computed","$route","methods","test","Error","component","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,UAAU,CAACG,IAAI,YAAYD,YAAY,aAAaE,MAAM,CAAC,MAAQR,EAAIS,OAAO,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,KAAO,OAAO,MAAQ,CAAEE,UAAWV,EAAIW,UAAWC,QAAS,UAAW,CAACR,EAAG,WAAW,CAACI,MAAM,CAAC,YAAc,MAAM,KAAO,QAAQK,MAAM,CAACC,MAAOd,EAAIS,KAAS,KAAEM,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIS,KAAM,OAAQO,IAAME,WAAW,cAAc,CAACd,EAAG,IAAI,CAACE,YAAY,8BAA8BE,MAAM,CAAC,KAAO,UAAUW,KAAK,cAAc,GAAGf,EAAG,eAAe,CAACI,MAAM,CAAC,KAAO,WAAW,MAAQ,CAAEE,UAAWV,EAAIoB,cAAeR,QAAS,UAAW,CAACR,EAAG,WAAW,CAACI,MAAM,CAAC,YAAc,KAAK,KAAO,YAAYK,MAAM,CAACC,MAAOd,EAAIS,KAAa,SAAEM,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIS,KAAM,WAAYO,IAAME,WAAW,kBAAkB,CAACd,EAAG,IAAI,CAACE,YAAY,gCAAgCE,MAAM,CAAC,KAAO,UAAUW,KAAK,cAAc,GAAGf,EAAG,YAAY,CAACE,YAAY,qBAAqBE,MAAM,CAAC,KAAO,WAAWa,GAAG,CAAC,MAAQrB,EAAIsB,aAAa,CAACtB,EAAIuB,GAAGvB,EAAIwB,GAAGxB,EAAIyB,QAAU,KAAO,SAASrB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACE,YAAY,kBAAkBE,MAAM,CAAC,GAAKR,EAAIyB,QAAU,mBAAqB,gBAAgB,CAACzB,EAAIuB,GAAG,WAAW,IAAI,IAAI,IACjwCG,EAAkB,G,gDC+BtB,GACEC,KAAM,QACNC,KAFF,WAGI,MAAO,CACLnB,KAAM,CACJkB,KAAM,GACNE,SAAU,MAIhBC,SAAU,CACRL,QADJ,WAEM,MAA4B,cAArBxB,KAAK8B,OAAOJ,OAGvBK,QAAS,CACPrB,UADJ,SACA,OACM,IAAK,aAAasB,KAAKnB,GACrB,OAAOC,EAAS,IAAImB,MAAM,YAE5BnB,KAGFK,cARJ,SAQA,OACM,IAAK,4CAA4Ca,KAAKnB,GACpD,OAAOC,EAAS,IAAImB,MAAM,iBAG5BnB,KAGF,WAhBJ,gKAiBA,mMACA,EADA,6BAGA,aACA,EAJA,gCAIA,uBAJA,2DAIA,uBAJA,4BAIA,EAJA,KAKA,wBACA,+CACA,yBACA,mCACA,OACA,8BACA,iCAXA,qDAcA,kBAdA,0DAiBA,GAjBA,+GAjBA,wGC/C8V,I,wBCQ1VoB,EAAY,eACd,EACApC,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAS,E,gCCnBf,IAAIC,EAAK,EAAQ,QAAgBC,EAC7BC,EAASC,SAASC,UAClBC,EAAS,wBACTC,EAAO,OAGXA,KAAQJ,GAAU,EAAQ,SAAqBF,EAAGE,EAAQI,EAAM,CAC9DC,cAAc,EACdC,IAAK,WACH,IACE,OAAQ,GAAK3C,MAAM4C,MAAMJ,GAAQ,GACjC,MAAOK,GACP,MAAO,Q,2DCZb,yBAAwjB,EAAG","file":"js/chunk-018f107f.82ad0ca4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"prop\":\"name\",\"rules\":{ validator: _vm.rulesName, trigger: 'blur' }}},[_c('el-input',{attrs:{\"placeholder\":\"用户名\",\"type\":\"text\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}},[_c('i',{staticClass:\"el-icon-user el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"rules\":{ validator: _vm.rulesPassword, trigger: 'blur' }}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"type\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}},[_c('i',{staticClass:\"el-icon-unlock el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-button',{staticClass:\"login-form__submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(_vm._s(_vm.isLogin ? '登录' : '注册'))]),_c('div',{staticClass:\"login-other\"},[_c('router-link',{staticClass:\"login-other_reg\",attrs:{\"to\":_vm.isLogin ? '/user/registered' : '/user/login'}},[_vm._v(\"注册账号\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login\">\r\n    <el-form :model=\"form\" ref=\"loginForm\" class=\"login-form\">\r\n      <el-form-item prop=\"name\" :rules=\"{ validator: rulesName, trigger: 'blur' }\">\r\n        <el-input v-model=\"form.name\" placeholder=\"用户名\" type=\"text\">\r\n          <i\r\n            class=\"el-icon-user el-input__icon\"\r\n            slot=\"prefix\"\r\n          >\r\n          </i>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"password\" :rules=\"{ validator: rulesPassword, trigger: 'blur' }\">\r\n        <el-input v-model=\"form.password\" placeholder=\"密码\" type=\"password\">\r\n          <i\r\n            class=\"el-icon-unlock el-input__icon\"\r\n            slot=\"prefix\"\r\n          >\r\n          </i>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-button class=\"login-form__submit\" @click=\"submitForm\" type=\"primary\">{{isLogin ? '登录' : '注册'}}</el-button>\r\n      <div class=\"login-other\">\r\n        <router-link class=\"login-other_reg\" :to=\"isLogin ? '/user/registered' : '/user/login'\">注册账号</router-link>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, registered } from '@/request'\r\n\r\nexport default {\r\n  name: 'login',\r\n  data () {\r\n    return {\r\n      form: {\r\n        name: '',\r\n        password: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    isLogin () {\r\n      return this.$route.name === 'userLogin'\r\n    }\r\n  },\r\n  methods: {\r\n    rulesName (rule, value, callback) {\r\n      if (!/^\\w{5,16}$/.test(value)) {\r\n        return callback(new Error('用户名输入错误'))\r\n      }\r\n      callback()\r\n    },\r\n\r\n    rulesPassword (rule, value, callback) {\r\n      if (!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[^]{8,16}$/.test(value)) {\r\n        return callback(new Error('密码输入错误，8~16位'))\r\n      }\r\n\r\n      callback()\r\n    },\r\n\r\n    async submitForm () {\r\n      this.$refs['loginForm'].validate(async valid => {\r\n        if (valid) {\r\n          try {\r\n            const isLogin = this.isLogin\r\n            const res = isLogin ? await login(this.form) : await registered(this.form)\r\n            if (isLogin && typeof res === 'string') {\r\n              localStorage.setItem('CRAB_TOKEN', 'Bearer ' + res)\r\n              this.$router.push('/tasks')\r\n              this.$message.success('登录成功，等待跳转！')\r\n            } else if (!isLogin && res) {\r\n              this.$router.push('/user/login')\r\n              this.$message.success('注册成功，请登录！')\r\n            }\r\n          } catch (e) {\r\n            console.log(e)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import \"login\";\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=44597e3a&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=44597e3a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44597e3a\",\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=44597e3a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=44597e3a&lang=less&scoped=true&\""],"sourceRoot":""}