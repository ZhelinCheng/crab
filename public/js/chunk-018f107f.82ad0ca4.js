(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-018f107f"],{"71a8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.form}},[r("el-form-item",{attrs:{prop:"name",rules:{validator:e.rulesName,trigger:"blur"}}},[r("el-input",{attrs:{placeholder:"用户名",type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[r("i",{staticClass:"el-icon-user el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-form-item",{attrs:{prop:"password",rules:{validator:e.rulesPassword,trigger:"blur"}}},[r("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[r("i",{staticClass:"el-icon-unlock el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-button",{staticClass:"login-form__submit",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.isLogin?"登录":"注册"))]),r("div",{staticClass:"login-other"},[r("router-link",{staticClass:"login-other_reg",attrs:{to:e.isLogin?"/user/registered":"/user/login"}},[e._v("注册账号")])],1)],1)],1)},s=[],a=(r("96cf"),r("3b8d")),o=(r("7f7f"),r("8daa")),i={name:"login",data:function(){return{form:{name:"",password:""}}},computed:{isLogin:function(){return"userLogin"===this.$route.name}},methods:{rulesName:function(e,t,r){if(!/^\w{5,16}$/.test(t))return r(new Error("用户名输入错误"));r()},rulesPassword:function(e,t,r){if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/.test(t))return r(new Error("密码输入错误，8~16位"));r()},submitForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["loginForm"].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=21;break}if(e.prev=1,n=t.isLogin,!n){e.next=9;break}return e.next=6,Object(o["f"])(t.form);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Object(o["g"])(t.form);case 11:e.t0=e.sent;case 12:s=e.t0,n&&"string"===typeof s?(localStorage.setItem("CRAB_TOKEN","Bearer "+s),t.$router.push("/tasks"),t.$message.success("登录成功，等待跳转！")):!n&&s&&(t.$router.push("/user/login"),t.$message.success("注册成功，请登录！")),e.next=19;break;case 16:e.prev=16,e.t1=e["catch"](1),console.log(e.t1);case 19:e.next=22;break;case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},u=i,c=(r("c0d1"),r("2877")),l=Object(c["a"])(u,n,s,!1,null,"44597e3a",null);t["default"]=l.exports},"7f7f":function(e,t,r){var n=r("86cc").f,s=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in s||r("9e1e")&&n(s,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},"8fa1":function(e,t,r){},c0d1:function(e,t,r){"use strict";var n=r("8fa1"),s=r.n(n);s.a}}]);
//# sourceMappingURL=chunk-018f107f.82ad0ca4.js.map